# Программно - инструментальный комплекс формирования обязательной отчетности

## Общая информация
Программно - инструментальный комплекс формирования обязательной отчетности (далее - Комплекс) автоматизирует построение таких форм обязательной отчетности 
перед Центральным Банком РФ, как 0409115, 0409136 (ФОР), 0409155, 0409345, контроль и консолидация формы 0409101. 

![image](https://github.com/savadevel/RPG/assets/69199994/3ef15852-94d3-40cc-9c40-8d92fe328575)
![image](https://github.com/savadevel/RPG/assets/69199994/0c37af92-7812-47d6-8eec-2c0d907b2bb6)

Комплекс позволяет при использовании базовой функциональности и справочников реализовать новые формы и автоматизировать связанные задачи в сравнительно короткие сроки. 
Это достигается за счет использования базовой функциональности ядра Комплекса, что дает возможность перенести акцент на специфику новой формы/задачи при обеспечении высокого уровня функциональных возможностей, не разрабатывая их повторно. 

Комплекс разрабатывался с учетом изменяющихся требований Центрального банка РФ, а также внутренних требований заказчика, а именно Комплекс позволяет формализовать процесс автоматизации сложной отчетности до сравнительно простых инструкций, 
учитывающих новые требования. Указанные инструкции хранятся в БД Комплекса под версионным контролем, что дает такие конкурентные преимущества, как централизация вносимых изменений, простота их внесения и самое главное - возможность вернуться 
к требованиям формирования и представления, которые действовали на определенную дату их действия, с сохранением полной функциональности. 

## Модули
Комплекс построен по модульно – блочному принципу и включает следующие модули:

### Модуль расчета форм обязательной отчетности
На основании имеющихся данных (загруженные из внешних источников, корректировки пользователя, НСИ и т.д.) осуществляется расчет и контроль таких форм отчетности, как:
* 0409101
* 0409115
* 0409136
* 0409155
* 0409345 

Каждая рассчитываемая форма отчетности характеризуется определенной меткой – версией, что позволяет логически объединить как исходные данные, так и произведенный на их основе расчет. 
Т.к. все версии объединяются по принципу родительская - дочерняя ("дерево"), то реализована возможность наследования данных, параметров расчета и корректировок пользователя от родительской формы к дочерней форме отчетности, 
а это исключает повторный ручной ввод и тем самым устраняет операционные ошибки, а также позволяет снизить издержки на хранение однотипных данных и тем самым значительно снизит объем БД.

![image](https://github.com/savadevel/RPG/assets/69199994/c7c92dd9-1597-470e-88ec-e67ca9dddd85)

### Модуль нормативно-справочной информации (НСИ)
Является единым для автоматизируемых форм отчетности. НСИ содержит такие справочники, как: 
* справочник курсов валют
* справочник видов валют
* календарь
* баланс
* план счетов
* справочник подразделений

НСИ включает инструментарий по корректировки и расширению данных.

![image](https://github.com/savadevel/RPG/assets/69199994/a75b8e19-547a-4aaa-b46b-40214e82fb6e)
![image](https://github.com/savadevel/RPG/assets/69199994/21f84ce0-dab8-4edd-ad5f-1250a839459a)
![image](https://github.com/savadevel/RPG/assets/69199994/5db7bfe7-a9ae-4531-b088-32bf3594cd4e)
![image](https://github.com/savadevel/RPG/assets/69199994/315d26ff-5b02-4492-8ac4-a26844877804)
![image](https://github.com/savadevel/RPG/assets/69199994/145aca33-d8dc-4790-aeb1-7b4960509e39)

### Модуль манипуляции данными
Модуль манипуляции данными реализует следующую функциональность:
* Сквозная поддержка версионности данных, что дает возможность привязки к отчетным формам определенных версий данных, корректировок пользователя и справочников
* Загрузка исходных данных из различных источников, реализована поддержка таких источников как MSSQL, ODBC, Access, DBF, Excel, kliko, ПТК «Резерв» и ПТК ПСД. Т.к. описание источника формализовано до простых инструкций, то тривиальной является задача добавления новых источников
* Интерфейс для ручной корректировки загруженных данных, а также добавления новых данных
* Контроль загружаемых данных по правилам, формулируемым на основе простых инструкций
* Выгрузка данных в различных форматах (Excel, CSV, DBF, Kliko, ПТК "Резерв", ПТК ПСД, HTML) и при соблюдении требований к представлению – форматированию, что задается через простые инструкции
* Контроль целостности данных при использовании триггеров и реляционных связей

И включает инструментарий по корректировки и расширению данных.

![image](https://github.com/savadevel/RPG/assets/69199994/34ee3c25-a971-4a4e-bbab-ddc46bd30aa1)
![image](https://github.com/savadevel/RPG/assets/69199994/1c5db033-f1cd-458f-a67e-6253daab4932)
![image](https://github.com/savadevel/RPG/assets/69199994/3a499b5b-2f63-4ca2-bd94-4bb31dee40a2)

### Модуль администрирования 
Позволяет управлять (добавление/удаление/редактирование) пользователями Комплекса, а также группами пользователей. 

Каждой конкретной группе можно назначить полномочия на работу с определенными инструментами: "доступ запрещен", "доступ разрешен на чтение" и "доступ разрешен на изменение". 
Пользователи могут входить в различные группы. Каждая группа относиться к определенному типу: функциональная и системная, при этом пользователь не может входить одновременно в группы обоих типов.

![image](https://github.com/savadevel/RPG/assets/69199994/c52c1a07-b4a9-4dc6-8623-20c810b2cef0)
![image](https://github.com/savadevel/RPG/assets/69199994/48eaedc9-0cfb-402c-a127-747b4d56e789)

### Модуль аудита 
Журналирование событий и действий пользователя. В журнале фиксируются, в частности, изменения данных до и после их корректировки пользователем, а также дата, 
время изменения и информация о сессии в рамках, которой было сделано данное изменение. Модуль аудита включает инструментарий для просмотра журнала. 
Изменение записей в журнале аудита недопустимо ни одним из пользователей системы.

![image](https://github.com/savadevel/RPG/assets/69199994/9c648e18-64d3-4d16-b7eb-8bd1f1e703dc)

### Модуль безопасности 
Система защиты состоит из аутентификации, контроля доступа и аудита. 
Аутентификация осуществляется по протоколу NTLM или Kerberos. 
Контроль доступа (набора привилегий) осуществляется сервером приложений в рамках инициированной сессии, которая выполняется от имени зарегистрированного пользователя, при этом контроль доступа к инструментам для просмотра и корректировки данных осуществляется согласно правам, заданным для группы, в которую входит пользователь. 
Пользователь не имеет прямого доступа к серверу БД.

## Архитектура / стек технологий
Комплекс имеет 3-х уровневую архитектуру, а именно:
* клиентская часть на базе Internet Explorer (HTML, JavaScript, AJAX, CSS, DHTML, DOM)
* сервер приложений (Apache, perl)
* сервер баз данных (MSSQL)

## ER-диаграмма
![image](https://github.com/savadevel/RPG/assets/69199994/a414e97e-a0c0-4493-8023-b14c6bdf5b9d)
